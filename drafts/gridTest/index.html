<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>

        <style>
            body {
                margin:   0px;
                overflow: hidden;
            }
        </style>

        <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
        <script>
            var idealLineDistance = 0;

            var scale  = 1;
            var origin = {
                x: window.innerWidth / 2,
                y: window.innerHeight / 2
            };
            var ctx;

            $(function() {
                $("#canvas").attr("width", window.innerWidth);
                $("#canvas").attr("height", window.innerHeight);

                var canvas = document.getElementById("canvas");
                ctx = canvas.getContext("2d");

                ctx.translate(origin.x, origin.y);

                setInterval(function() {
                    idealLineDistance += 0.1;
                    ctx.clearRect(-origin.x, -origin.y, window.innerWidth, window.innerHeight);
                    drawGrid();
                }, 20);
            });

            function drawGrid() {
                var a = idealLineDistance / (Math.pow(10, Math.floor(Math.log10(idealLineDistance))));
                var b = [Math.abs(1 - a), Math.abs(2 - a), Math.abs(5 - a)];
                if (b[0] <= b[1] && b[0] <= b[2]) {
                    var lineDistance = Math.pow(10, Math.floor(Math.log10(idealLineDistance)));
                } else if (b[1] <= b[0] && b[1] <= b[2]) {
                    var lineDistance = 2 * Math.pow(10, Math.floor(Math.log10(idealLineDistance)));
                } else {
                    var lineDistance = 5 * Math.pow(10, Math.floor(Math.log10(idealLineDistance)));
                }
                console.log(lineDistance);

                ctx.lineWidth = 1;

                // Draw vertical lines
                for (var i = Math.ceil(-origin.x / lineDistance); i < (window.innerWidth - origin.x) / lineDistance; i++) {
                    ctx.beginPath();
                    var lineX = Math.round(i * lineDistance) + 0.5;
                    ctx.moveTo(lineX, -origin.y);
                    ctx.lineTo(lineX, window.innerHeight - origin.y);
                    ctx.closePath();
                    ctx.stroke();
                }

                // Draw horizontal lines
                for (var i = Math.ceil(-origin.y / lineDistance); i < (window.innerHeight - origin.y) / lineDistance; i++) {
                    ctx.beginPath();
                    var lineY = Math.round(i * lineDistance) + 0.5;
                    ctx.moveTo(-origin.x, lineY);
                    ctx.lineTo(window.innerWidth - origin.x, lineY);
                    ctx.closePath();
                    ctx.stroke();
                }
            }
        </script>
    </head>
    <body>
        <canvas id="canvas"></canvas>
    </body>
</html>
